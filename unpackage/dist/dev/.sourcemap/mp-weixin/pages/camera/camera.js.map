{"version":3,"file":"camera.js","sources":["pages/camera/camera.vue","pages/camera/camera.vue?type=page"],"sourcesContent":["<template>\r\n    <view class=\"camera-page\">\r\n        <!-- 相机组件（全屏） -->\r\n        <camera class=\"camera\" :device-position=\"cameraPosition\" :flash=\"flash\" v-if=\"showCamera\">\r\n            <!-- 倒计时 -->\r\n            <cover-view class=\"countdown\" v-if=\"countdown > 0\">\r\n                <cover-view class=\"countdown-number\">{{ countdown }}</cover-view>\r\n            </cover-view>\r\n        </camera>\r\n\r\n        <!-- 姿势参考图（居中，半透明） -->\r\n        <image src=\"/static/girl-pose-01.png\" class=\"pose-reference\" :style=\"{ opacity: 0.5 }\" />\r\n\r\n        <!-- 自定义顶部导航栏 -->\r\n        <view class=\"custom-navbar\">\r\n            <!-- 返回按钮 -->\r\n            <view class=\"nav-left\" @click=\"goBack\">\r\n                <image src=\"/static/arrow_left.png\" class=\"nav-icon\" />\r\n            </view>\r\n        </view>\r\n\r\n        <!-- 固定在底部的操作栏 -->\r\n        <view class=\"fixed-action-bar\">\r\n            <!-- 姿势选择提示框 -->\r\n            <view class=\"pose-tip\" v-if=\"showPoseTip\" :class=\"{ 'fade-out': isTipFading }\" @click=\"hidePoseTip\">\r\n                <view class=\"tip-content\">\r\n                    <text class=\"tip-icon\">👇</text>\r\n                    <text class=\"tip-text\">调整参数</text>\r\n                </view>\r\n                <view class=\"tip-arrow\"></view>\r\n            </view>\r\n            <view class=\"action-items\">\r\n                <!-- 左侧：相册预览 -->\r\n                <view class=\"action-item album-preview\" @click=\"showSettings\">\r\n                    <image src=\"/static/girl-pose-01.png\" class=\"preview-image\" />\r\n                </view>\r\n\r\n                <!-- 中央：拍照按钮 -->\r\n                <view class=\"action-item shutter-container\" @click=\"takePhoto\">\r\n                    <view class=\"shutter-button\">\r\n                        <view class=\"shutter-circle\">\r\n                            <view class=\"loading\" v-if=\"isCapturing\"></view>\r\n                        </view>\r\n                    </view>\r\n                </view>\r\n\r\n                <!-- 右侧：切换摄像头 -->\r\n                <view class=\"action-item switch-camera\" @click=\"switchCamera\">\r\n                    <image src=\"/static/switch_camera.png\" class=\"switch-icon\" />\r\n                </view>\r\n            </view>\r\n        </view>\r\n    </view>\r\n\r\n    <!-- 设置弹窗 -->\r\n    <view class=\"settings-modal\" v-if=\"showSettingsModal\" @click=\"closeSettings\">\r\n        <view class=\"settings-content\" @click.stop>\r\n            <view class=\"settings-header\">\r\n                <text class=\"settings-title\">拍照设置</text>\r\n                <text class=\"close-btn\" @click=\"closeSettings\">✕</text>\r\n            </view>\r\n\r\n            <!-- 修改这里：给 scroll-view 添加明确的样式类 -->\r\n            <scroll-view class=\"settings-body\" scroll-y :scroll-top=\"scrollTop\" @scroll=\"onScroll\">\r\n                <!-- 透明度设置 -->\r\n                <view class=\"setting-item\">\r\n                    <view class=\"setting-label\">\r\n                        <text class=\"label-text\">参考图透明度</text>\r\n                        <text class=\"label-value\">{{ Math.round(settings.opacity * 100) }}%</text>\r\n                    </view>\r\n                    <view class=\"slider-container\">\r\n                        <slider class=\"opacity-slider\" :value=\"settings.opacity * 100\" min=\"10\" max=\"90\" step=\"5\"\r\n                            activeColor=\"#007AFF\" backgroundColor=\"#E5E5E5\" block-size=\"20\" @changing=\"onOpacityChange\"\r\n                            @change=\"onOpacityChange\" />\r\n                    </view>\r\n                </view>\r\n\r\n                <!-- 倒计时设置 -->\r\n                <view class=\"setting-item\">\r\n                    <view class=\"setting-label\">\r\n                        <text class=\"label-text\">倒计时时长</text>\r\n                        <text class=\"label-value\">{{ settings.countdownDuration }}秒</text>\r\n                    </view>\r\n                    <view class=\"countdown-options\">\r\n                        <view class=\"countdown-option\" v-for=\"duration in countdownOptions\" :key=\"duration\"\r\n                            :class=\"{ active: settings.countdownDuration === duration }\"\r\n                            @click=\"setCountdownDuration(duration)\">\r\n                            {{ duration }}秒\r\n                        </view>\r\n                    </view>\r\n                </view>\r\n\r\n                <!-- 显示模式设置 -->\r\n                <view class=\"setting-item\">\r\n                    <view class=\"setting-label\">\r\n                        <text class=\"label-text\">参考图显示模式</text>\r\n                    </view>\r\n                    <view class=\"display-modes\">\r\n                        <view class=\"display-mode\" :class=\"{ active: settings.displayMode === 'background' }\"\r\n                            @click=\"setDisplayMode('background')\">\r\n                            <view class=\"mode-info\">\r\n                                <image class=\"mode-icon\"\r\n                                    :src=\"settings.displayMode === 'background' ? '/static/background-active.png' : '/static/background.png'\">\r\n                                </image>\r\n                                <text class=\"mode-title\">背景图模式</text>\r\n                            </view>\r\n                            <text class=\"mode-desc\">固定在屏幕中央作为背景</text>\r\n                        </view>\r\n\r\n                        <view class=\"display-mode\" :class=\"{ active: settings.displayMode === 'float' }\"\r\n                            @click=\"setDisplayMode('float')\">\r\n                            <view class=\"mode-info\">\r\n                                <image class=\"mode-icon\"\r\n                                    :src=\"settings.displayMode === 'float' ? '/static/float-active.png' : '/static/float.png'\">\r\n                                </image>\r\n                                <text class=\"mode-title\">浮窗模式</text>\r\n                            </view>\r\n                            <text class=\"mode-desc\">可拖动调整位置的浮窗</text>\r\n                        </view>\r\n                    </view>\r\n                </view>\r\n\r\n                <!-- 其他设置 -->\r\n                <view class=\"setting-item\">\r\n                    <view class=\"setting-label\">\r\n                        <text class=\"label-text\">其他选项</text>\r\n                    </view>\r\n                    <view class=\"switch-options\">\r\n                        <view class=\"switch-option\">\r\n                            <view class=\"option-header\">\r\n                                <text class=\"switch-label\">震动反馈</text>\r\n                                <switch :checked=\"settings.vibration\" color=\"#007AFF\" @change=\"onVibrationChange\" />\r\n                            </view>\r\n                        </view>\r\n                        <view class=\"switch-option\">\r\n                            <view class=\"option-header\">\r\n                                <text class=\"switch-label\">快门音效</text>\r\n                                <switch :checked=\"settings.shutterSound\" color=\"#007AFF\"\r\n                                    @change=\"onShutterSoundChange\" />\r\n                            </view>\r\n                        </view>\r\n                        <view class=\"switch-option\">\r\n                            <view class=\"option-header\">\r\n                                <text class=\"switch-label\">网格辅助线</text>\r\n                                <switch :checked=\"settings.showGrid\" color=\"#007AFF\" @change=\"onGridChange\" />\r\n                            </view>\r\n\r\n                            <transition name=\"fade\">\r\n                                <view class=\"grid-container\" v-if=\"settings.showGrid\">\r\n                                    <view class=\"option-item\" v-for=\"(option, index) in settings.options\" :key=\"index\">\r\n                                        <radio class=\"radio\" :value=\"option.value\"\r\n                                            :checked=\"settings.selectedOption === option.value\"\r\n                                            :disabled=\"!settings.showGrid\" @click=\"selectOption(option.value)\" />\r\n                                        <text class=\"option-label\">{{ option.label }}</text>\r\n                                    </view>\r\n                                </view>\r\n                            </transition>\r\n                        </view>\r\n                    </view>\r\n                </view>\r\n\r\n                <view class=\"setting-item\">\r\n                    <view class=\"settings-footer\">\r\n                        <view class=\"reset-btn\" @click=\"resetSettings\">\r\n                            <text>恢复默认</text>\r\n                        </view>\r\n                        <view class=\"save-btn\" @click=\"saveSettings\"><text>保存设置</text></view>\r\n                    </view>\r\n                </view>\r\n\r\n                <!-- 添加底部间距，确保最后一项可以完全显示 -->\r\n                <view class=\"scroll-bottom-padding\"></view>\r\n            </scroll-view>\r\n        </view>\r\n    </view>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        data() {\r\n            return {\r\n                showCamera: true,\r\n                cameraPosition: 'back',\r\n                flash: 'off',\r\n                isCapturing: false,\r\n                countdown: 0,\r\n                showPoseTip: false, // 控制提示框显示\r\n                isTipFading: false, // 控制淡出动画\r\n                tipTimer: null, // 提示框定时器,\r\n                showSettingsModal: false,\r\n\r\n                // 滚动相关\r\n                scrollTop: 0,\r\n                isScrolling: false,\r\n                scrollTimer: null,\r\n\r\n                // 设置相关\r\n                settings: {\r\n                    opacity: 0.3, // 透明度\r\n                    countdownDuration: 3, // 倒计时时长（秒）\r\n                    displayMode: 'background', // 显示模式: 'background' | 'float'\r\n                    vibration: true, // 震动反馈\r\n                    shutterSound: true, // 快门音效\r\n                    showGrid: false,\r\n\r\n                    // 当前选中的参考线类型\r\n                    selectedOption: \"grid\",\r\n\r\n                    // 所有参考线选项\r\n                    options: [{\r\n                            value: \"grid\",\r\n                            label: \"九宫格参考线\"\r\n                        },\r\n                        {\r\n                            value: \"golden\",\r\n                            label: \"黄金分割线\"\r\n                        },\r\n                        {\r\n                            value: \"spiral\",\r\n                            label: \"黄金螺旋线\"\r\n                        },\r\n                        {\r\n                            value: \"diagonal\",\r\n                            label: \"对角线参考线\"\r\n                        },\r\n                        {\r\n                            value: \"thirds\",\r\n                            label: \"三分法参考线\"\r\n                        }\r\n                    ]\r\n                },\r\n\r\n                // 倒计时选项\r\n                countdownOptions: [0, 1, 3, 5, 10],\r\n\r\n                // 浮窗拖拽相关\r\n                floatPosition: {\r\n                    x: 50,\r\n                    y: 200\r\n                },\r\n                isDragging: false,\r\n                dragStartPos: {\r\n                    x: 0,\r\n                    y: 0\r\n                }\r\n            }\r\n        },\r\n        // 添加 onReady 生命周期\r\n        onReady() {\r\n            // 页面渲染完成后显示提示\r\n            this.showPoseSelectionTip();\r\n        },\r\n\r\n        // 在 onHide 中清理定时器\r\n        onHide() {\r\n            this.clearTipTimer();\r\n        },\r\n\r\n        // 在 onUnload 中清理定时器\r\n        onUnload() {\r\n            this.clearTipTimer();\r\n        },\r\n        computed: {\r\n            isIOS() {\r\n                const platform = uni.getSystemInfoSync().platform;\r\n                return platform === 'ios' || platform === 'mac';\r\n            }\r\n        },\r\n        methods: {\r\n            switchCamera() {\r\n                this.cameraPosition = this.cameraPosition === 'back' ? 'front' : 'back';\r\n            },\r\n            takePhoto() {\r\n                // 拍照逻辑\r\n                if (this.isCapturing) return;\r\n                this.isCapturing = true;\r\n                this.startCountdown();\r\n            },\r\n            goBack() {\r\n                uni.navigateBack();\r\n            },\r\n            // 倒计时\r\n            startCountdown() {\r\n                this.countdown = 3;\r\n                const timer = setInterval(() => {\r\n                    this.countdown--;\r\n\r\n                    if (this.countdown <= 0) {\r\n                        // 震动反馈\r\n                        uni.vibrateShort();\r\n                        clearInterval(timer);\r\n                        this.capturePhoto();\r\n                    }\r\n                }, 1000);\r\n            },\r\n            // 执行拍照\r\n            capturePhoto() {\r\n                const ctx = uni.createCameraContext();\r\n\r\n                ctx.takePhoto({\r\n                    quality: 'high',\r\n                    success: (res) => {\r\n                        this.capturedImage = res.tempImagePath;\r\n                        this.isCapturing = false;\r\n\r\n                        // 播放拍照音效\r\n                        this.playShutterSound();\r\n                    },\r\n                    fail: (err) => {\r\n                        console.log('拍照失败:', err);\r\n                        this.isCapturing = false;\r\n                        uni.showToast({\r\n                            title: '拍照失败',\r\n                            icon: 'none'\r\n                        });\r\n                    }\r\n                });\r\n            },\r\n\r\n            // 播放快门音效\r\n            playShutterSound() {\r\n                const audioContext = uni.createInnerAudioContext();\r\n                audioContext.src = '/static/audio/shutter.mp3';\r\n                audioContext.play();\r\n            },\r\n\r\n            // 显示姿势选择提示\r\n            showPoseSelectionTip() {\r\n                // 延迟500ms显示，确保页面完全加载\r\n                setTimeout(() => {\r\n                    this.showPoseTip = true;\r\n\r\n                    // 2秒后开始淡出动画\r\n                    this.tipTimer = setTimeout(() => {\r\n                        this.startTipFadeOut();\r\n                    }, 2000);\r\n                }, 500);\r\n            },\r\n\r\n            // 开始淡出动画\r\n            startTipFadeOut() {\r\n                this.isTipFading = true;\r\n\r\n                // 动画完成后隐藏提示框\r\n                setTimeout(() => {\r\n                    this.showPoseTip = false;\r\n                    this.isTipFading = false;\r\n                }, 300); // 300ms 动画时间\r\n            },\r\n\r\n            // 清理定时器\r\n            clearTipTimer() {\r\n                if (this.tipTimer) {\r\n                    clearTimeout(this.tipTimer);\r\n                    this.tipTimer = null;\r\n                }\r\n            },\r\n\r\n            // 手动隐藏提示框（可选，用户点击提示框时）\r\n            hidePoseTip() {\r\n                this.clearTipTimer();\r\n                this.startTipFadeOut();\r\n            },\r\n\r\n            // 设置相关方法\r\n            showSettings() {\r\n                this.hidePoseTip();\r\n                this.showSettingsModal = true;\r\n            },\r\n\r\n            closeSettings() {\r\n                this.showSettingsModal = false;\r\n            },\r\n\r\n            // 透明度调整\r\n            onOpacityChange(e) {\r\n                this.settings.opacity = e.detail.value / 100;\r\n            },\r\n\r\n            // 倒计时时长设置\r\n            setCountdownDuration(duration) {\r\n                this.settings.countdownDuration = duration;\r\n            },\r\n\r\n            // 显示模式设置\r\n            setDisplayMode(mode) {\r\n                this.settings.displayMode = mode;\r\n                if (mode === 'float') {\r\n                    this.initFloatPosition();\r\n                }\r\n            },\r\n\r\n            // 开关设置\r\n            onVibrationChange(e) {\r\n                this.settings.vibration = e.detail.value;\r\n            },\r\n\r\n            onShutterSoundChange(e) {\r\n                this.settings.shutterSound = e.detail.value;\r\n            },\r\n\r\n            onAutoCaptureChange(e) {\r\n                this.settings.autoCapture = e.detail.value;\r\n            },\r\n\r\n            // 重置设置\r\n            resetSettings() {\r\n                uni.showModal({\r\n                    title: '确认重置',\r\n                    content: '是否恢复所有设置为默认值？',\r\n                    success: (res) => {\r\n                        if (res.confirm) {\r\n                            this.settings = {\r\n                                opacity: 0.3,\r\n                                countdownDuration: 3,\r\n                                displayMode: 'background',\r\n                                vibration: true,\r\n                                shutterSound: true,\r\n                                autoCapture: false\r\n                            };\r\n                            uni.showToast({\r\n                                title: '已恢复默认设置',\r\n                                icon: 'success'\r\n                            });\r\n                        }\r\n                    }\r\n                });\r\n            },\r\n\r\n            // 保存设置\r\n            saveSettings() {\r\n                uni.showToast({\r\n                    title: '设置已保存',\r\n                    icon: 'success'\r\n                });\r\n                this.closeSettings();\r\n            },\r\n\r\n            // 浮窗拖拽相关方法\r\n            initFloatPosition() {\r\n                const systemInfo = uni.getSystemInfoSync();\r\n                this.floatPosition = {\r\n                    x: systemInfo.windowWidth - 200,\r\n                    y: 200\r\n                };\r\n            },\r\n\r\n            // 滚动相关方法 - 优化\r\n            onScroll(e) {\r\n                // 防抖处理，减少频繁更新\r\n                if (this.scrollTimer) {\r\n                    clearTimeout(this.scrollTimer);\r\n                }\r\n\r\n                this.isScrolling = true;\r\n                this.scrollTimer = setTimeout(() => {\r\n                    this.isScrolling = false;\r\n                }, 150);\r\n\r\n                // 只在必要时更新scrollTop\r\n                const newScrollTop = e.detail.scrollTop;\r\n                if (Math.abs(newScrollTop - this.scrollTop) > 5) {\r\n                    this.scrollTop = newScrollTop;\r\n                }\r\n            },\r\n\r\n            onScrollToUpper() {\r\n                // 到达顶部时的处理\r\n                console.log('滚动到顶部');\r\n            },\r\n\r\n            onScrollToLower() {\r\n                // 到达底部时的处理  \r\n                console.log('滚动到底部');\r\n            },\r\n\r\n            // 新增的设置方法\r\n            onSaveOriginalChange(e) {\r\n                this.settings.saveOriginal = e.detail.value;\r\n            },\r\n\r\n            onWatermarkChange(e) {\r\n                this.settings.addWatermark = e.detail.value;\r\n            },\r\n\r\n            onGridChange(e) {\r\n                this.settings.showGrid = e.detail.value;\r\n\r\n                if (this.settings.showGrid && !this.settings.selectedOption) {\r\n                    this.settings.selectedOption = \"grid\";\r\n                }\r\n            },\r\n\r\n            // 选择参考线类型\r\n            selectOption(value) {\r\n                if (!this.settings.showGrid) return;\r\n                this.settings.selectedOption = value;\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    .camera-page {\r\n        position: fixed;\r\n        top: 0;\r\n        left: 0;\r\n        width: 100%;\r\n        height: 100vh;\r\n        background-color: #000;\r\n    }\r\n\r\n    .camera {\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        width: 100%;\r\n        height: 100%;\r\n        z-index: 1;\r\n    }\r\n\r\n    .countdown {\r\n        position: absolute;\r\n        top: 50%;\r\n        left: 50%;\r\n        transform: translate(-50%, -50%);\r\n\r\n        .countdown-number {\r\n            color: white;\r\n            font-size: 120rpx;\r\n            font-weight: bold;\r\n            text-shadow: 0 0 20rpx rgba(0, 0, 0, 0.8);\r\n            animation: countdownPulse 1s ease-in-out;\r\n        }\r\n    }\r\n\r\n    @keyframes countdownPulse {\r\n        0% {\r\n            transform: scale(0.5);\r\n            opacity: 0;\r\n        }\r\n\r\n        50% {\r\n            transform: scale(1.2);\r\n            opacity: 1;\r\n        }\r\n\r\n        100% {\r\n            transform: scale(1);\r\n            opacity: 1;\r\n        }\r\n    }\r\n\r\n    .pose-reference {\r\n        position: absolute;\r\n        top: 50%;\r\n        left: 50%;\r\n        transform: translate(-50%, -50%);\r\n        width: 80%;\r\n        height: 70%;\r\n        z-index: 2;\r\n    }\r\n\r\n    .custom-navbar {\r\n        position: absolute;\r\n        top: var(--status-bar-height);\r\n        left: 0;\r\n        right: 0;\r\n        height: 90rpx;\r\n        /* 自定义导航栏高度 */\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n        padding: 0 10rpx;\r\n        z-index: 3;\r\n    }\r\n\r\n    .nav-left,\r\n    .nav-right {\r\n        width: 60rpx;\r\n        height: 60rpx;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        padding-top: 50rpx;\r\n    }\r\n\r\n    .nav-icon {\r\n        width: 40rpx;\r\n        height: 40rpx;\r\n    }\r\n\r\n    /* 固定在底部的操作栏 */\r\n    .fixed-action-bar {\r\n        position: fixed;\r\n        bottom: 0;\r\n        left: 0;\r\n        right: 0;\r\n        z-index: 100;\r\n        width: 100%;\r\n        background: rgba(0, 0, 0, 0.8);\r\n        backdrop-filter: blur(20px);\r\n        border-top: 1rpx solid rgba(255, 255, 255, 0.1);\r\n        padding: 40rpx 0;\r\n    }\r\n\r\n    // 姿势选择提示框\r\n    .pose-tip {\r\n        position: absolute;\r\n        bottom: 150rpx;\r\n        left: 80rpx;\r\n        z-index: 200;\r\n        animation: tipFadeIn 0.3s ease-out;\r\n\r\n        &.fade-out {\r\n            animation: tipFadeOut 0.3s ease-out;\r\n        }\r\n\r\n        .tip-content {\r\n            background: white;\r\n            color: black;\r\n            padding: 10rpx 15rpx;\r\n            border-radius: 10rpx;\r\n            font-size: 24rpx;\r\n            display: flex;\r\n            align-items: center;\r\n            gap: 10rpx;\r\n            backdrop-filter: blur(10rpx);\r\n            border: 1rpx solid rgba(255, 255, 255, 0.2);\r\n            box-shadow: 0 8rpx 32rpx rgba(0, 0, 0, 0.3);\r\n\r\n            .tip-icon {\r\n                font-size: 24rpx;\r\n                animation: pointDown 1s ease-in-out infinite;\r\n            }\r\n\r\n            .tip-text {\r\n                white-space: nowrap;\r\n            }\r\n        }\r\n\r\n        // 箭头指向姿势预览\r\n        .tip-arrow {\r\n            width: 0;\r\n            height: 0;\r\n            border-left: 15rpx solid transparent;\r\n            border-right: 15rpx solid transparent;\r\n            border-top: 20rpx solid rgba(0, 0, 0, 0.8);\r\n            margin: 0 auto;\r\n            position: relative;\r\n\r\n            &::before {\r\n                content: '';\r\n                position: absolute;\r\n                top: -22rpx;\r\n                left: -16rpx;\r\n                width: 0;\r\n                height: 0;\r\n                border-left: 16rpx solid transparent;\r\n                border-right: 16rpx solid transparent;\r\n                border-top: 22rpx solid rgba(255, 255, 255, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    // 提示框动画\r\n    @keyframes tipFadeIn {\r\n        0% {\r\n            opacity: 0;\r\n            transform: translateY(20rpx);\r\n        }\r\n\r\n        100% {\r\n            opacity: 1;\r\n            transform: translateY(0);\r\n        }\r\n    }\r\n\r\n    @keyframes tipFadeOut {\r\n        0% {\r\n            opacity: 1;\r\n            transform: translateY(0);\r\n        }\r\n\r\n        100% {\r\n            opacity: 0;\r\n            transform: translateY(-20rpx);\r\n        }\r\n    }\r\n\r\n    // 手指指向动画\r\n    @keyframes pointDown {\r\n        0% {\r\n            transform: translateY(-5px);\r\n        }\r\n\r\n        50% {\r\n            transform: translateY(5rpx);\r\n        }\r\n\r\n        100% {\r\n            transform: translateY(-5px);\r\n        }\r\n    }\r\n\r\n    /* 操作项容器 */\r\n    .action-items {\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        padding: 0 60rpx;\r\n        gap: 70rpx;\r\n    }\r\n\r\n    /* 每个操作项的通用样式 */\r\n    .action-item {\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        height: 100rpx;\r\n    }\r\n\r\n    /* 相册预览 */\r\n    .album-preview {\r\n        width: 80rpx;\r\n        height: 80rpx;\r\n        border-radius: 16rpx;\r\n        overflow: hidden;\r\n        border: 3rpx solid rgba(255, 255, 255, 0.8);\r\n\r\n        .preview-image {\r\n            width: 100%;\r\n            height: 100%;\r\n        }\r\n    }\r\n\r\n    /* 拍照按钮容器 */\r\n    .shutter-container {\r\n        flex: 1;\r\n        max-width: 200rpx;\r\n    }\r\n\r\n    /* 拍照按钮 */\r\n    .shutter-button {\r\n        width: 120rpx;\r\n        height: 120rpx;\r\n        border-radius: 50%;\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        background: rgba(255, 255, 255, 0.2);\r\n    }\r\n\r\n    .shutter-circle {\r\n        width: 80rpx;\r\n        height: 80rpx;\r\n        border-radius: 50%;\r\n        background: #ffffff;\r\n        border: 4rpx solid rgba(255, 255, 255, 0.6);\r\n        transition: all 0.1s ease;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n\r\n        .shutter-button:active & {\r\n            transform: scale(0.95);\r\n            opacity: 0.8;\r\n        }\r\n\r\n        .loading {\r\n            width: 40rpx;\r\n            height: 40rpx;\r\n            border: 4rpx solid #ccc;\r\n            border-top: 4rpx solid #333;\r\n            border-radius: 50%;\r\n            animation: spin 1s linear infinite;\r\n        }\r\n    }\r\n\r\n    @keyframes spin {\r\n        0% {\r\n            transform: rotate(0deg);\r\n        }\r\n\r\n        100% {\r\n            transform: rotate(360deg);\r\n        }\r\n    }\r\n\r\n    /* 切换摄像头按钮 */\r\n    .switch-camera {\r\n        width: 80rpx;\r\n        height: 80rpx;\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        background: rgba(255, 255, 255, 0.15);\r\n        border-radius: 50%;\r\n    }\r\n\r\n    .switch-icon {\r\n        width: 40rpx;\r\n        height: 40rpx;\r\n        filter: brightness(200%);\r\n    }\r\n\r\n    // 设置弹窗样式修改\r\n    .settings-modal {\r\n        position: fixed;\r\n        top: 0;\r\n        left: 0;\r\n        right: 0;\r\n        bottom: 0;\r\n        background: rgba(0, 0, 0, 0.8);\r\n        z-index: 1000;\r\n        display: flex;\r\n        align-items: flex-end;\r\n        animation: modalFadeIn 0.3s ease-out;\r\n\r\n        .settings-content {\r\n            background: white;\r\n            border-radius: 40rpx 40rpx 0 0;\r\n            width: 100%;\r\n            /* 修改：使用具体的高度而不是max-height */\r\n            height: 80vh;\r\n            display: flex;\r\n            flex-direction: column;\r\n            animation: modalSlideUp 0.3s ease-out;\r\n            /* 确保不会超出屏幕 */\r\n            overflow: hidden;\r\n\r\n            .settings-header {\r\n                /* 固定高度 */\r\n                height: 120rpx;\r\n                display: flex;\r\n                align-items: center;\r\n                justify-content: space-between;\r\n                padding: 0 30rpx;\r\n                border-bottom: 1rpx solid #f0f0f0;\r\n                /* 防止收缩 */\r\n                flex-shrink: 0;\r\n\r\n                .settings-title {\r\n                    font-size: 36rpx;\r\n                    font-weight: bold;\r\n                    color: #333;\r\n                }\r\n\r\n                .close-btn {\r\n                    font-size: 40rpx;\r\n                    color: #999;\r\n                    padding: 10rpx;\r\n                    width: 60rpx;\r\n                    height: 60rpx;\r\n                    display: flex;\r\n                    align-items: center;\r\n                    justify-content: center;\r\n                }\r\n            }\r\n\r\n            .settings-body {\r\n                /* 关键修改：明确设置高度和滚动属性 */\r\n                flex: 1;\r\n                height: 0;\r\n                /* 重要：让 flex 子元素正确计算高度 */\r\n                padding: 0;\r\n                /* 确保滚动区域的样式 */\r\n                overflow-y: auto;\r\n\r\n                .setting-item {\r\n                    padding: 40rpx 30rpx;\r\n                    border-bottom: 1rpx solid #f5f5f5;\r\n\r\n                    &:last-child {\r\n                        border-bottom: none;\r\n                    }\r\n\r\n                    .setting-label {\r\n                        display: flex;\r\n                        align-items: center;\r\n                        justify-content: space-between;\r\n                        margin-bottom: 30rpx;\r\n\r\n                        .label-text {\r\n                            font-size: 32rpx;\r\n                            color: #333;\r\n                            font-weight: 500;\r\n                        }\r\n\r\n                        .label-value {\r\n                            font-size: 28rpx;\r\n                            color: #007AFF;\r\n                            font-weight: bold;\r\n                        }\r\n                    }\r\n\r\n                    // 滑块容器\r\n                    .slider-container {\r\n                        padding: 3rpx 0;\r\n\r\n                        .opacity-slider {\r\n                            width: 90%;\r\n                        }\r\n                    }\r\n\r\n                    // 倒计时选项\r\n                    .countdown-options {\r\n                        display: flex;\r\n                        gap: 20rpx;\r\n                        justify-content: space-between;\r\n\r\n                        .countdown-option {\r\n                            padding: 10rpx 30rpx;\r\n                            background: #f8f9fa;\r\n                            border-radius: 15rpx;\r\n                            font-size: 28rpx;\r\n                            color: #666;\r\n                            border: 2rpx solid transparent;\r\n                            transition: all 0.3s ease;\r\n\r\n                            &.active {\r\n                                background: #007AFF;\r\n                                color: white;\r\n                                border-color: #007AFF;\r\n                            }\r\n\r\n                            &:active {\r\n                                transform: scale(0.95);\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    // 显示模式选项\r\n                    .display-modes {\r\n                        display: flex;\r\n                        justify-content: space-between;\r\n                        gap: 10rpx;\r\n\r\n                        .display-mode {\r\n                            display: flex;\r\n                            flex-direction: column;\r\n                            justify-content: start;\r\n                            padding: 30rpx;\r\n                            background: #f8f9fa;\r\n                            border-radius: 20rpx;\r\n                            margin-bottom: 20rpx;\r\n                            border: 2rpx solid transparent;\r\n                            transition: all 0.3s ease;\r\n\r\n                            &.active {\r\n                                background: #e3f2fd;\r\n                                border-color: #007AFF;\r\n                            }\r\n\r\n                            &:active {\r\n                                transform: scale(0.98);\r\n                            }\r\n\r\n                            .mode-info {\r\n                                flex: 1;\r\n                                display: flex;\r\n                                flex-direction: row;\r\n                                align-items: center;\r\n                                margin-bottom: 10rpx;\r\n\r\n                                .mode-icon {\r\n                                    height: 40rpx;\r\n                                    width: 40rpx;\r\n                                    margin-right: 20rpx;\r\n                                }\r\n\r\n                                .mode-title {\r\n                                    display: block;\r\n                                    font-size: 28rpx;\r\n                                    color: #333;\r\n                                    font-weight: 500;\r\n                                }\r\n                            }\r\n\r\n                            .mode-desc {\r\n                                font-size: 24rpx;\r\n                                color: #666;\r\n                                line-height: 1.4;\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    // 开关选项\r\n                    .switch-options {\r\n                        .switch-option {\r\n                            &:not(:last-child) {\r\n                                border-bottom: 1rpx solid #f0f0f0;\r\n                            }\r\n\r\n                            .option-header {\r\n                                display: flex;\r\n                                align-items: center;\r\n                                justify-content: space-between;\r\n                                padding: 25rpx 0;\r\n\r\n                                .switch-label {\r\n                                    font-size: 30rpx;\r\n                                    color: #333;\r\n                                }\r\n                            }\r\n\r\n                            /* 选项列表 */\r\n                            .option-list {\r\n                                padding: 0 20rpx;\r\n\r\n                                &.disabled {\r\n                                    .option-label {\r\n                                        color: #cccccc;\r\n                                    }\r\n\r\n                                    .radio {\r\n                                        opacity: 0.5;\r\n                                    }\r\n                                }\r\n                            }\r\n\r\n                            .option-item {\r\n                                display: flex;\r\n                                align-items: center;\r\n                                padding: 30rpx 0;\r\n                                border-bottom: 1rpx solid #f0f0f0;\r\n\r\n                                &:last-child {\r\n                                    border-bottom: none;\r\n                                }\r\n                            }\r\n\r\n                            .radio {\r\n                                transform: scale(1.2);\r\n                                margin-right: 20rpx;\r\n                            }\r\n\r\n                            .option-label {\r\n                                font-size: 30rpx;\r\n                                color: #000000;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            .settings-footer {\r\n                /* 固定高度 */\r\n                display: flex;\r\n                gap: 20rpx;\r\n                padding: 0 30rpx;\r\n                /* 防止收缩 */\r\n                flex-shrink: 0;\r\n                background: white;\r\n                text-align: center;\r\n\r\n                .reset-btn,\r\n                .save-btn {\r\n                    flex: 1;\r\n                    height: 80rpx;\r\n                    border-radius: 40rpx;\r\n                    font-size: 32rpx;\r\n                    border: none;\r\n                    transition: all 0.3s ease;\r\n                    display: flex;\r\n                    align-items: center;\r\n                    justify-content: center;\r\n\r\n                    &:active {\r\n                        transform: scale(0.98);\r\n                        box-shadow: 0 1px 4px rgba(175, 82, 222, 0.3);\r\n                    }\r\n                }\r\n\r\n                .reset-btn {\r\n                    background: #f5f5f5;\r\n                    color: #666;\r\n                }\r\n\r\n                .save-btn {\r\n                    background: #007AFF;\r\n                    color: white;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /* 添加滚动条样式（仅在支持的浏览器中生效） */\r\n    .settings-body::-webkit-scrollbar {\r\n        width: 6rpx;\r\n    }\r\n\r\n    .settings-body::-webkit-scrollbar-thumb {\r\n        background-color: rgba(0, 0, 0, 0.2);\r\n        border-radius: 3rpx;\r\n    }\r\n\r\n    .settings-body::-webkit-scrollbar-track {\r\n        background-color: transparent;\r\n    }\r\n\r\n    // 底部填充空间\r\n    .scroll-bottom-padding {\r\n        height: 40rpx;\r\n    }\r\n\r\n    /* 定义过渡效果 */\r\n    .fade-enter-active,\r\n    .fade-leave-active {\r\n        transition: opacity 0.3s ease, transform 0.3s ease;\r\n    }\r\n\r\n    .fade-enter,\r\n    .fade-leave-to {\r\n        opacity: 0;\r\n        transform: translateY(20px);\r\n    }\r\n</style>","import MiniProgramPage from '/Users/newgeek/Documents/HBuilderProjects/hello-uni-app/pages/camera/camera.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":"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"}