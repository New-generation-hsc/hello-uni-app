{"version":3,"file":"camera.js","sources":["pages/camera/camera.vue","pages/camera/camera.vue?type=page"],"sourcesContent":["<template>\n  <view class=\"camera-page\">\n    <!-- 相机组件（全屏） -->\n    <camera\n      class=\"camera\"\n      :device-position=\"cameraPosition\"\n      :flash=\"flash\"\n      v-if=\"showCamera\"\n    >\n\t<!-- 倒计时 -->\n\t<cover-view class=\"countdown\" v-if=\"countdown > 0\">\n\t  <cover-view class=\"countdown-number\">{{ countdown }}</cover-view>\n\t</cover-view>\n\t</camera>\n\n    <!-- 姿势参考图（居中，半透明） -->\n    <image\n      src=\"/static/girl-pose-01.png\"\n      class=\"pose-reference\"\n      :style=\"{ opacity: 0.5 }\"\n    />\n\n    <!-- 自定义顶部导航栏 -->\n    <view class=\"custom-navbar\">\n      <!-- 返回按钮 -->\n      <view class=\"nav-left\" @click=\"goBack\">\n        <image src=\"/static/arrow_left.png\" class=\"nav-icon\" />\n      </view>\n    </view>\n\n     <!-- 固定在底部的操作栏 -->\n\t<view class=\"fixed-action-bar\">\n\t   <!-- 姿势选择提示框 -->\n\t\t<view class=\"pose-tip\" v-if=\"showPoseTip\" :class=\"{ 'fade-out': isTipFading }\" @click=\"hidePoseTip\">\n\t\t  <view class=\"tip-content\">\n\t\t\t<text class=\"tip-icon\">👇</text>\n\t\t\t<text class=\"tip-text\">调整参数</text>\n\t\t  </view>\n\t\t  <view class=\"tip-arrow\"></view>\n\t\t</view>\n\t  <view class=\"action-items\">\n\t\t<!-- 左侧：相册预览 -->\n\t\t<view class=\"action-item album-preview\">\n\t\t  <image src=\"/static/girl-pose-01.png\" class=\"preview-image\" />\n\t\t</view>\n\t\t\n\t\t<!-- 中央：拍照按钮 -->\n\t\t<view class=\"action-item shutter-container\" @click=\"takePhoto\">\n\t\t  <view class=\"shutter-button\">\n\t\t\t<view class=\"shutter-circle\">\n\t\t\t\t<view class=\"loading\" v-if=\"isCapturing\"></view>\n\t\t\t</view>\n\t\t  </view>\n\t\t</view>\n\t\t\n\t\t<!-- 右侧：切换摄像头 -->\n\t\t<view class=\"action-item switch-camera\" @click=\"switchCamera\">\n\t\t  <image src=\"/static/switch_camera.png\" class=\"switch-icon\" />\n\t\t</view>\n\t  </view>\n\t</view>\n  </view>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      showCamera: true,\n      cameraPosition: 'back',\n      flash: 'off',\n\t  isCapturing: false,\n\t  countdown: 0,\n\tshowPoseTip: false,    // 控制提示框显示\n\tisTipFading: false,    // 控制淡出动画\n\ttipTimer: null,        // 提示框定时器\n    }\n  },\n   // 添加 onReady 生命周期\n    onReady() {\n      // 页面渲染完成后显示提示\n      this.showPoseSelectionTip();\n    },\n  \n    // 在 onHide 中清理定时器\n    onHide() {\n      this.clearTipTimer();\n    },\n  \n    // 在 onUnload 中清理定时器\n    onUnload() {\n      this.clearTipTimer();\n    },\n  methods: {\n    switchCamera() {\n      this.cameraPosition = this.cameraPosition === 'back' ? 'front' : 'back';\n    },\n    takePhoto() {\n      // 拍照逻辑\n\t  if(this.isCapturing) return;\n\t  this.isCapturing = true;\n\t  this.startCountdown();\n    },\n\tgoBack() {\n\t\tuni.navigateBack();\n\t},\n\t// 倒计时\n\tstartCountdown() {\n\t  this.countdown = 3;\n\t  const timer = setInterval(() => {\n\t\tthis.countdown--;\n\t\t\n\t\tif (this.countdown <= 0) {\n\t\t  // 震动反馈\n\t\t  uni.vibrateShort();\n\t\t  clearInterval(timer);\n\t\t  this.capturePhoto();\n\t\t}\n\t  }, 1000);\n\t},\n\t// 执行拍照\n\tcapturePhoto() {\n\t  const ctx = uni.createCameraContext();\n\t  \n\t  ctx.takePhoto({\n\t\tquality: 'high',\n\t\tsuccess: (res) => {\n\t\t  this.capturedImage = res.tempImagePath;\n\t\t  this.isCapturing = false;\n\t\t  \n\t\t  // 播放拍照音效\n\t\t  this.playShutterSound();\n\t\t},\n\t\tfail: (err) => {\n\t\t  console.log('拍照失败:', err);\n\t\t  this.isCapturing = false;\n\t\t  uni.showToast({\n\t\t\ttitle: '拍照失败',\n\t\t\ticon: 'none'\n\t\t  });\n\t\t}\n\t  });\n\t},\n\n\t// 播放快门音效\n\tplayShutterSound() {\n\t  const audioContext = uni.createInnerAudioContext();\n\t  audioContext.src = '/static/audio/shutter.mp3';\n\t  audioContext.play();\n\t},\n\t\n\t// 显示姿势选择提示\n\tshowPoseSelectionTip() {\n\t  // 延迟500ms显示，确保页面完全加载\n\t  setTimeout(() => {\n\t\tthis.showPoseTip = true;\n\t\t\n\t\t// 2秒后开始淡出动画\n\t\tthis.tipTimer = setTimeout(() => {\n\t\t  this.startTipFadeOut();\n\t\t}, 2000);\n\t  }, 500);\n\t},\n\n\t// 开始淡出动画\n\tstartTipFadeOut() {\n\t  this.isTipFading = true;\n\t  \n\t  // 动画完成后隐藏提示框\n\t  setTimeout(() => {\n\t\tthis.showPoseTip = false;\n\t\tthis.isTipFading = false;\n\t  }, 300); // 300ms 动画时间\n\t},\n\n\t// 清理定时器\n\tclearTipTimer() {\n\t  if (this.tipTimer) {\n\t\tclearTimeout(this.tipTimer);\n\t\tthis.tipTimer = null;\n\t  }\n\t},\n\t\n\t// 手动隐藏提示框（可选，用户点击提示框时）\n\thidePoseTip() {\n\t  this.clearTipTimer();\n\t  this.startTipFadeOut();\n\t}\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.camera-page {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100vh;\n  background-color: #000;\n}\n\n.camera {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 1;\n}\n\n.countdown {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  \n  .countdown-number {\n    color: white;\n    font-size: 120rpx;\n    font-weight: bold;\n    text-shadow: 0 0 20rpx rgba(0,0,0,0.8);\n    animation: countdownPulse 1s ease-in-out;\n  }\n}\n\n@keyframes countdownPulse {\n  0% { transform: scale(0.5); opacity: 0; }\n  50% { transform: scale(1.2); opacity: 1; }\n  100% { transform: scale(1); opacity: 1; }\n}\n\n.pose-reference {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 80%;\n  height: 70%;\n  z-index: 2;\n}\n\n.custom-navbar {\n  position: absolute;\n  top: var(--status-bar-height);\n  left: 0;\n  right: 0;\n  height: 90rpx; /* 自定义导航栏高度 */\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0 10rpx;\n  z-index: 3;\n}\n\n.nav-left, .nav-right {\n  width: 60rpx;\n  height: 60rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding-top: 50rpx;\n}\n\n.nav-icon {\n  width: 40rpx;\n  height: 40rpx;\n}\n\n/* 固定在底部的操作栏 */\n.fixed-action-bar {\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  z-index: 100;\n  width: 100%;\n  background: rgba(0, 0, 0, 0.8);\n  backdrop-filter: blur(20px);\n  border-top: 1rpx solid rgba(255, 255, 255, 0.1);\n  padding: 40rpx 0;\n}\n\n// 姿势选择提示框\n  .pose-tip {\n    position: absolute;\n    bottom: 150rpx;\n    left: 80rpx;\n    z-index: 200;\n    animation: tipFadeIn 0.3s ease-out;\n    \n    &.fade-out {\n      animation: tipFadeOut 0.3s ease-out;\n    }\n    \n    .tip-content {\n      background: white;\n      color: black;\n      padding: 10rpx 15rpx;\n      border-radius: 10rpx;\n      font-size: 24rpx;\n      display: flex;\n      align-items: center;\n      gap: 10rpx;\n      backdrop-filter: blur(10rpx);\n\t  border: 1rpx solid rgba(255, 255, 255, 0.2);\n      box-shadow: 0 8rpx 32rpx rgba(0, 0, 0, 0.3);\n      \n      .tip-icon {\n        font-size: 24rpx;\n        animation: pointDown 1s ease-in-out infinite;\n      }\n      \n      .tip-text {\n        white-space: nowrap;\n      }\n    }\n    \n    // 箭头指向姿势预览\n    .tip-arrow {\n      width: 0;\n      height: 0;\n      border-left: 15rpx solid transparent;\n      border-right: 15rpx solid transparent;\n      border-top: 20rpx solid rgba(0, 0, 0, 0.8);\n      margin: 0 auto;\n      position: relative;\n      \n      &::before {\n        content: '';\n        position: absolute;\n        top: -22rpx;\n        left: -16rpx;\n        width: 0;\n        height: 0;\n        border-left: 16rpx solid transparent;\n        border-right: 16rpx solid transparent;\n        border-top: 22rpx solid rgba(255, 255, 255, 1);\n      }\n    }\n  }\n\n// 提示框动画\n@keyframes tipFadeIn {\n  0% {\n    opacity: 0;\n    transform: translateY(20rpx);\n  }\n  100% {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes tipFadeOut {\n  0% {\n    opacity: 1;\n    transform: translateY(0);\n  }\n  100% {\n    opacity: 0;\n    transform: translateY(-20rpx);\n  }\n}\n\n// 手指指向动画\n@keyframes pointDown {\n  0% {\n    transform: translateY(-5px);\n  }\n  50% {\n    transform: translateY(5rpx);\n  }\n  100% {\n    transform: translateY(-5px);\n  }\n}\n\n/* 操作项容器 */\n.action-items {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 0 60rpx;\n  gap: 70rpx;\n}\n\n/* 每个操作项的通用样式 */\n.action-item {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100rpx;\n}\n\n/* 相册预览 */\n.album-preview {\n  width: 80rpx;\n  height: 80rpx;\n  border-radius: 16rpx;\n  overflow: hidden;\n  border: 3rpx solid rgba(255, 255, 255, 0.8);\n  \n  .preview-image {\n    width: 100%;\n    height: 100%;\n  }\n}\n\n/* 拍照按钮容器 */\n.shutter-container {\n  flex: 1;\n  max-width: 200rpx;\n}\n\n/* 拍照按钮 */\n.shutter-button {\n  width: 120rpx;\n  height: 120rpx;\n  border-radius: 50%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: rgba(255, 255, 255, 0.2);\n}\n\n.shutter-circle {\n  width: 80rpx;\n  height: 80rpx;\n  border-radius: 50%;\n  background: #ffffff;\n  border: 4rpx solid rgba(255, 255, 255, 0.6);\n  transition: all 0.1s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  \n  .shutter-button:active & {\n    transform: scale(0.95);\n    opacity: 0.8;\n  }\n  \n  .loading {\n\twidth: 40rpx;\n\theight: 40rpx;\n\tborder: 4rpx solid #ccc;\n\tborder-top: 4rpx solid #333;\n\tborder-radius: 50%;\n\tanimation: spin 1s linear infinite;\n  }\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n/* 切换摄像头按钮 */\n.switch-camera {\n  width: 80rpx;\n  height: 80rpx;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: rgba(255, 255, 255, 0.15);\n  border-radius: 50%;\n}\n\n.switch-icon {\n  width: 40rpx;\n  height: 40rpx;\n  filter: brightness(200%);\n}\n</style>","import MiniProgramPage from '/Users/newgeek/Documents/HBuilderProjects/hello-uni-app/pages/camera/camera.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;;AAiEA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,YAAY;AAAA,MACZ,gBAAgB;AAAA,MAChB,OAAO;AAAA,MACV,aAAa;AAAA,MACb,WAAW;AAAA,MACb,aAAa;AAAA;AAAA,MACb,aAAa;AAAA;AAAA,MACb,UAAU;AAAA;AAAA,IACP;AAAA,EACD;AAAA;AAAA,EAEC,UAAU;AAER,SAAK,qBAAoB;AAAA,EAC1B;AAAA;AAAA,EAGD,SAAS;AACP,SAAK,cAAa;AAAA,EACnB;AAAA;AAAA,EAGD,WAAW;AACT,SAAK,cAAa;AAAA,EACnB;AAAA,EACH,SAAS;AAAA,IACP,eAAe;AACb,WAAK,iBAAiB,KAAK,mBAAmB,SAAS,UAAU;AAAA,IAClE;AAAA,IACD,YAAY;AAEb,UAAG,KAAK;AAAa;AACrB,WAAK,cAAc;AACnB,WAAK,eAAc;AAAA,IACjB;AAAA,IACJ,SAAS;AACRA,oBAAG,MAAC,aAAY;AAAA,IAChB;AAAA;AAAA,IAED,iBAAiB;AACf,WAAK,YAAY;AACjB,YAAM,QAAQ,YAAY,MAAM;AACjC,aAAK;AAEL,YAAI,KAAK,aAAa,GAAG;AAEvBA,wBAAG,MAAC,aAAY;AAChB,wBAAc,KAAK;AACnB,eAAK,aAAY;AAAA,QACnB;AAAA,MACE,GAAE,GAAI;AAAA,IACR;AAAA;AAAA,IAED,eAAe;AACb,YAAM,MAAMA,oBAAI;AAEhB,UAAI,UAAU;AAAA,QACf,SAAS;AAAA,QACT,SAAS,CAAC,QAAQ;AAChB,eAAK,gBAAgB,IAAI;AACzB,eAAK,cAAc;AAGnB,eAAK,iBAAgB;AAAA,QACtB;AAAA,QACD,MAAM,CAAC,QAAQ;AACbA,wBAAY,MAAA,MAAA,OAAA,kCAAA,SAAS,GAAG;AACxB,eAAK,cAAc;AACnBA,wBAAAA,MAAI,UAAU;AAAA,YACf,OAAO;AAAA,YACP,MAAM;AAAA,UACL,CAAC;AAAA,QACH;AAAA,MACC,CAAC;AAAA,IACF;AAAA;AAAA,IAGD,mBAAmB;AACjB,YAAM,eAAeA,oBAAI;AACzB,mBAAa,MAAM;AACnB,mBAAa,KAAI;AAAA,IAClB;AAAA;AAAA,IAGD,uBAAuB;AAErB,iBAAW,MAAM;AAClB,aAAK,cAAc;AAGnB,aAAK,WAAW,WAAW,MAAM;AAC/B,eAAK,gBAAe;AAAA,QACrB,GAAE,GAAI;AAAA,MACL,GAAE,GAAG;AAAA,IACP;AAAA;AAAA,IAGD,kBAAkB;AAChB,WAAK,cAAc;AAGnB,iBAAW,MAAM;AAClB,aAAK,cAAc;AACnB,aAAK,cAAc;AAAA,MACjB,GAAE,GAAG;AAAA,IACP;AAAA;AAAA,IAGD,gBAAgB;AACd,UAAI,KAAK,UAAU;AACpB,qBAAa,KAAK,QAAQ;AAC1B,aAAK,WAAW;AAAA,MACf;AAAA,IACD;AAAA;AAAA,IAGD,cAAc;AACZ,WAAK,cAAa;AAClB,WAAK,gBAAe;AAAA,IACtB;AAAA,EACC;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5LA,GAAG,WAAW,eAAe;"}