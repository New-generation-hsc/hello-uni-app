{"version":3,"file":"camera.js","sources":["pages/camera/camera.vue","pages/camera/camera.vue?type=page"],"sourcesContent":["<template>\r\n\t<view class=\"camera-page\">\r\n\t\t<!-- 相机组件（全屏） -->\r\n\t\t<camera class=\"camera\" :device-position=\"cameraPosition\" :flash=\"flash\" v-if=\"showCamera\">\r\n\t\t\t<!-- 倒计时 -->\r\n\t\t\t<cover-view class=\"countdown\" v-if=\"countdown > 0\">\r\n\t\t\t\t<cover-view class=\"countdown-number\">{{ countdown }}</cover-view>\r\n\t\t\t</cover-view>\r\n\t\t</camera>\r\n\r\n\t\t<!-- 姿势参考图（居中，半透明） -->\r\n\t\t<image src=\"/static/girl-pose-01.png\" class=\"pose-reference\" :style=\"{ opacity: 0.5 }\" />\r\n\r\n\t\t<!-- 自定义顶部导航栏 -->\r\n\t\t<view class=\"custom-navbar\">\r\n\t\t\t<!-- 返回按钮 -->\r\n\t\t\t<view class=\"nav-left\" @click=\"goBack\">\r\n\t\t\t\t<image src=\"/static/arrow_left.png\" class=\"nav-icon\" />\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 固定在底部的操作栏 -->\r\n\t\t<view class=\"fixed-action-bar\">\r\n\t\t\t<!-- 姿势选择提示框 -->\r\n\t\t\t<view class=\"pose-tip\" v-if=\"showPoseTip\" :class=\"{ 'fade-out': isTipFading }\" @click=\"hidePoseTip\">\r\n\t\t\t\t<view class=\"tip-content\">\r\n\t\t\t\t\t<text class=\"tip-icon\">👇</text>\r\n\t\t\t\t\t<text class=\"tip-text\">调整参数</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"tip-arrow\"></view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"action-items\">\r\n\t\t\t\t<!-- 左侧：相册预览 -->\r\n\t\t\t\t<view class=\"action-item album-preview\">\r\n\t\t\t\t\t<image src=\"/static/girl-pose-01.png\" class=\"preview-image\" />\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<!-- 中央：拍照按钮 -->\r\n\t\t\t\t<view class=\"action-item shutter-container\" @click=\"takePhoto\">\r\n\t\t\t\t\t<view class=\"shutter-button\">\r\n\t\t\t\t\t\t<view class=\"shutter-circle\">\r\n\t\t\t\t\t\t\t<view class=\"loading\" v-if=\"isCapturing\"></view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<!-- 右侧：切换摄像头 -->\r\n\t\t\t\t<view class=\"action-item switch-camera\" @click=\"switchCamera\">\r\n\t\t\t\t\t<image src=\"/static/switch_camera.png\" class=\"switch-icon\" />\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tshowCamera: true,\r\n\t\t\t\tcameraPosition: 'back',\r\n\t\t\t\tflash: 'off',\r\n\t\t\t\tisCapturing: false,\r\n\t\t\t\tcountdown: 0,\r\n\t\t\t\tshowPoseTip: false, // 控制提示框显示\r\n\t\t\t\tisTipFading: false, // 控制淡出动画\r\n\t\t\t\ttipTimer: null, // 提示框定时器\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 添加 onReady 生命周期\r\n\t\tonReady() {\r\n\t\t\t// 页面渲染完成后显示提示\r\n\t\t\tthis.showPoseSelectionTip();\r\n\t\t},\r\n\r\n\t\t// 在 onHide 中清理定时器\r\n\t\tonHide() {\r\n\t\t\tthis.clearTipTimer();\r\n\t\t},\r\n\r\n\t\t// 在 onUnload 中清理定时器\r\n\t\tonUnload() {\r\n\t\t\tthis.clearTipTimer();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tswitchCamera() {\r\n\t\t\t\tthis.cameraPosition = this.cameraPosition === 'back' ? 'front' : 'back';\r\n\t\t\t},\r\n\t\t\ttakePhoto() {\r\n\t\t\t\t// 拍照逻辑\r\n\t\t\t\tif (this.isCapturing) return;\r\n\t\t\t\tthis.isCapturing = true;\r\n\t\t\t\tthis.startCountdown();\r\n\t\t\t},\r\n\t\t\tgoBack() {\r\n\t\t\t\tuni.navigateBack();\r\n\t\t\t},\r\n\t\t\t// 倒计时\r\n\t\t\tstartCountdown() {\r\n\t\t\t\tthis.countdown = 3;\r\n\t\t\t\tconst timer = setInterval(() => {\r\n\t\t\t\t\tthis.countdown--;\r\n\r\n\t\t\t\t\tif (this.countdown <= 0) {\r\n\t\t\t\t\t\t// 震动反馈\r\n\t\t\t\t\t\tuni.vibrateShort();\r\n\t\t\t\t\t\tclearInterval(timer);\r\n\t\t\t\t\t\tthis.capturePhoto();\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 1000);\r\n\t\t\t},\r\n\t\t\t// 执行拍照\r\n\t\t\tcapturePhoto() {\r\n\t\t\t\tconst ctx = uni.createCameraContext();\r\n\r\n\t\t\t\tctx.takePhoto({\r\n\t\t\t\t\tquality: 'high',\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tthis.capturedImage = res.tempImagePath;\r\n\t\t\t\t\t\tthis.isCapturing = false;\r\n\r\n\t\t\t\t\t\t// 播放拍照音效\r\n\t\t\t\t\t\tthis.playShutterSound();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\tconsole.log('拍照失败:', err);\r\n\t\t\t\t\t\tthis.isCapturing = false;\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '拍照失败',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t// 播放快门音效\r\n\t\t\tplayShutterSound() {\r\n\t\t\t\tconst audioContext = uni.createInnerAudioContext();\r\n\t\t\t\taudioContext.src = '/static/audio/shutter.mp3';\r\n\t\t\t\taudioContext.play();\r\n\t\t\t},\r\n\r\n\t\t\t// 显示姿势选择提示\r\n\t\t\tshowPoseSelectionTip() {\r\n\t\t\t\t// 延迟500ms显示，确保页面完全加载\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.showPoseTip = true;\r\n\r\n\t\t\t\t\t// 2秒后开始淡出动画\r\n\t\t\t\t\tthis.tipTimer = setTimeout(() => {\r\n\t\t\t\t\t\tthis.startTipFadeOut();\r\n\t\t\t\t\t}, 2000);\r\n\t\t\t\t}, 500);\r\n\t\t\t},\r\n\r\n\t\t\t// 开始淡出动画\r\n\t\t\tstartTipFadeOut() {\r\n\t\t\t\tthis.isTipFading = true;\r\n\r\n\t\t\t\t// 动画完成后隐藏提示框\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.showPoseTip = false;\r\n\t\t\t\t\tthis.isTipFading = false;\r\n\t\t\t\t}, 300); // 300ms 动画时间\r\n\t\t\t},\r\n\r\n\t\t\t// 清理定时器\r\n\t\t\tclearTipTimer() {\r\n\t\t\t\tif (this.tipTimer) {\r\n\t\t\t\t\tclearTimeout(this.tipTimer);\r\n\t\t\t\t\tthis.tipTimer = null;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t// 手动隐藏提示框（可选，用户点击提示框时）\r\n\t\t\thidePoseTip() {\r\n\t\t\t\tthis.clearTipTimer();\r\n\t\t\t\tthis.startTipFadeOut();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.camera-page {\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\twidth: 100%;\r\n\t\theight: 100vh;\r\n\t\tbackground-color: #000;\r\n\t}\r\n\r\n\t.camera {\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tz-index: 1;\r\n\t}\r\n\r\n\t.countdown {\r\n\t\tposition: absolute;\r\n\t\ttop: 50%;\r\n\t\tleft: 50%;\r\n\t\ttransform: translate(-50%, -50%);\r\n\r\n\t\t.countdown-number {\r\n\t\t\tcolor: white;\r\n\t\t\tfont-size: 120rpx;\r\n\t\t\tfont-weight: bold;\r\n\t\t\ttext-shadow: 0 0 20rpx rgba(0, 0, 0, 0.8);\r\n\t\t\tanimation: countdownPulse 1s ease-in-out;\r\n\t\t}\r\n\t}\r\n\r\n\t@keyframes countdownPulse {\r\n\t\t0% {\r\n\t\t\ttransform: scale(0.5);\r\n\t\t\topacity: 0;\r\n\t\t}\r\n\r\n\t\t50% {\r\n\t\t\ttransform: scale(1.2);\r\n\t\t\topacity: 1;\r\n\t\t}\r\n\r\n\t\t100% {\r\n\t\t\ttransform: scale(1);\r\n\t\t\topacity: 1;\r\n\t\t}\r\n\t}\r\n\r\n\t.pose-reference {\r\n\t\tposition: absolute;\r\n\t\ttop: 50%;\r\n\t\tleft: 50%;\r\n\t\ttransform: translate(-50%, -50%);\r\n\t\twidth: 80%;\r\n\t\theight: 70%;\r\n\t\tz-index: 2;\r\n\t}\r\n\r\n\t.custom-navbar {\r\n\t\tposition: absolute;\r\n\t\ttop: var(--status-bar-height);\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\theight: 90rpx;\r\n\t\t/* 自定义导航栏高度 */\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tpadding: 0 10rpx;\r\n\t\tz-index: 3;\r\n\t}\r\n\r\n\t.nav-left,\r\n\t.nav-right {\r\n\t\twidth: 60rpx;\r\n\t\theight: 60rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tpadding-top: 50rpx;\r\n\t}\r\n\r\n\t.nav-icon {\r\n\t\twidth: 40rpx;\r\n\t\theight: 40rpx;\r\n\t}\r\n\r\n\t/* 固定在底部的操作栏 */\r\n\t.fixed-action-bar {\r\n\t\tposition: fixed;\r\n\t\tbottom: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tz-index: 100;\r\n\t\twidth: 100%;\r\n\t\tbackground: rgba(0, 0, 0, 0.8);\r\n\t\tbackdrop-filter: blur(20px);\r\n\t\tborder-top: 1rpx solid rgba(255, 255, 255, 0.1);\r\n\t\tpadding: 40rpx 0;\r\n\t}\r\n\r\n\t// 姿势选择提示框\r\n\t.pose-tip {\r\n\t\tposition: absolute;\r\n\t\tbottom: 150rpx;\r\n\t\tleft: 80rpx;\r\n\t\tz-index: 200;\r\n\t\tanimation: tipFadeIn 0.3s ease-out;\r\n\r\n\t\t&.fade-out {\r\n\t\t\tanimation: tipFadeOut 0.3s ease-out;\r\n\t\t}\r\n\r\n\t\t.tip-content {\r\n\t\t\tbackground: white;\r\n\t\t\tcolor: black;\r\n\t\t\tpadding: 10rpx 15rpx;\r\n\t\t\tborder-radius: 10rpx;\r\n\t\t\tfont-size: 24rpx;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tgap: 10rpx;\r\n\t\t\tbackdrop-filter: blur(10rpx);\r\n\t\t\tborder: 1rpx solid rgba(255, 255, 255, 0.2);\r\n\t\t\tbox-shadow: 0 8rpx 32rpx rgba(0, 0, 0, 0.3);\r\n\r\n\t\t\t.tip-icon {\r\n\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\tanimation: pointDown 1s ease-in-out infinite;\r\n\t\t\t}\r\n\r\n\t\t\t.tip-text {\r\n\t\t\t\twhite-space: nowrap;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// 箭头指向姿势预览\r\n\t\t.tip-arrow {\r\n\t\t\twidth: 0;\r\n\t\t\theight: 0;\r\n\t\t\tborder-left: 15rpx solid transparent;\r\n\t\t\tborder-right: 15rpx solid transparent;\r\n\t\t\tborder-top: 20rpx solid rgba(0, 0, 0, 0.8);\r\n\t\t\tmargin: 0 auto;\r\n\t\t\tposition: relative;\r\n\r\n\t\t\t&::before {\r\n\t\t\t\tcontent: '';\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\ttop: -22rpx;\r\n\t\t\t\tleft: -16rpx;\r\n\t\t\t\twidth: 0;\r\n\t\t\t\theight: 0;\r\n\t\t\t\tborder-left: 16rpx solid transparent;\r\n\t\t\t\tborder-right: 16rpx solid transparent;\r\n\t\t\t\tborder-top: 22rpx solid rgba(255, 255, 255, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// 提示框动画\r\n\t@keyframes tipFadeIn {\r\n\t\t0% {\r\n\t\t\topacity: 0;\r\n\t\t\ttransform: translateY(20rpx);\r\n\t\t}\r\n\r\n\t\t100% {\r\n\t\t\topacity: 1;\r\n\t\t\ttransform: translateY(0);\r\n\t\t}\r\n\t}\r\n\r\n\t@keyframes tipFadeOut {\r\n\t\t0% {\r\n\t\t\topacity: 1;\r\n\t\t\ttransform: translateY(0);\r\n\t\t}\r\n\r\n\t\t100% {\r\n\t\t\topacity: 0;\r\n\t\t\ttransform: translateY(-20rpx);\r\n\t\t}\r\n\t}\r\n\r\n\t// 手指指向动画\r\n\t@keyframes pointDown {\r\n\t\t0% {\r\n\t\t\ttransform: translateY(-5px);\r\n\t\t}\r\n\r\n\t\t50% {\r\n\t\t\ttransform: translateY(5rpx);\r\n\t\t}\r\n\r\n\t\t100% {\r\n\t\t\ttransform: translateY(-5px);\r\n\t\t}\r\n\t}\r\n\r\n\t/* 操作项容器 */\r\n\t.action-items {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tpadding: 0 60rpx;\r\n\t\tgap: 70rpx;\r\n\t}\r\n\r\n\t/* 每个操作项的通用样式 */\r\n\t.action-item {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\theight: 100rpx;\r\n\t}\r\n\r\n\t/* 相册预览 */\r\n\t.album-preview {\r\n\t\twidth: 80rpx;\r\n\t\theight: 80rpx;\r\n\t\tborder-radius: 16rpx;\r\n\t\toverflow: hidden;\r\n\t\tborder: 3rpx solid rgba(255, 255, 255, 0.8);\r\n\r\n\t\t.preview-image {\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 100%;\r\n\t\t}\r\n\t}\r\n\r\n\t/* 拍照按钮容器 */\r\n\t.shutter-container {\r\n\t\tflex: 1;\r\n\t\tmax-width: 200rpx;\r\n\t}\r\n\r\n\t/* 拍照按钮 */\r\n\t.shutter-button {\r\n\t\twidth: 120rpx;\r\n\t\theight: 120rpx;\r\n\t\tborder-radius: 50%;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tbackground: rgba(255, 255, 255, 0.2);\r\n\t}\r\n\r\n\t.shutter-circle {\r\n\t\twidth: 80rpx;\r\n\t\theight: 80rpx;\r\n\t\tborder-radius: 50%;\r\n\t\tbackground: #ffffff;\r\n\t\tborder: 4rpx solid rgba(255, 255, 255, 0.6);\r\n\t\ttransition: all 0.1s ease;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\r\n\t\t.shutter-button:active & {\r\n\t\t\ttransform: scale(0.95);\r\n\t\t\topacity: 0.8;\r\n\t\t}\r\n\r\n\t\t.loading {\r\n\t\t\twidth: 40rpx;\r\n\t\t\theight: 40rpx;\r\n\t\t\tborder: 4rpx solid #ccc;\r\n\t\t\tborder-top: 4rpx solid #333;\r\n\t\t\tborder-radius: 50%;\r\n\t\t\tanimation: spin 1s linear infinite;\r\n\t\t}\r\n\t}\r\n\r\n\t@keyframes spin {\r\n\t\t0% {\r\n\t\t\ttransform: rotate(0deg);\r\n\t\t}\r\n\r\n\t\t100% {\r\n\t\t\ttransform: rotate(360deg);\r\n\t\t}\r\n\t}\r\n\r\n\t/* 切换摄像头按钮 */\r\n\t.switch-camera {\r\n\t\twidth: 80rpx;\r\n\t\theight: 80rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tbackground: rgba(255, 255, 255, 0.15);\r\n\t\tborder-radius: 50%;\r\n\t}\r\n\r\n\t.switch-icon {\r\n\t\twidth: 40rpx;\r\n\t\theight: 40rpx;\r\n\t\tfilter: brightness(200%);\r\n\t}\r\n</style>","import MiniProgramPage from '/Users/newgeek/Documents/HBuilderProjects/hello-uni-app/pages/camera/camera.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;;AAwDC,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,YAAY;AAAA,MACZ,gBAAgB;AAAA,MAChB,OAAO;AAAA,MACP,aAAa;AAAA,MACb,WAAW;AAAA,MACX,aAAa;AAAA;AAAA,MACb,aAAa;AAAA;AAAA,MACb,UAAU;AAAA;AAAA,IACX;AAAA,EACA;AAAA;AAAA,EAED,UAAU;AAET,SAAK,qBAAoB;AAAA,EACzB;AAAA;AAAA,EAGD,SAAS;AACR,SAAK,cAAa;AAAA,EAClB;AAAA;AAAA,EAGD,WAAW;AACV,SAAK,cAAa;AAAA,EAClB;AAAA,EACD,SAAS;AAAA,IACR,eAAe;AACd,WAAK,iBAAiB,KAAK,mBAAmB,SAAS,UAAU;AAAA,IACjE;AAAA,IACD,YAAY;AAEX,UAAI,KAAK;AAAa;AACtB,WAAK,cAAc;AACnB,WAAK,eAAc;AAAA,IACnB;AAAA,IACD,SAAS;AACRA,oBAAG,MAAC,aAAY;AAAA,IAChB;AAAA;AAAA,IAED,iBAAiB;AAChB,WAAK,YAAY;AACjB,YAAM,QAAQ,YAAY,MAAM;AAC/B,aAAK;AAEL,YAAI,KAAK,aAAa,GAAG;AAExBA,wBAAG,MAAC,aAAY;AAChB,wBAAc,KAAK;AACnB,eAAK,aAAY;AAAA,QAClB;AAAA,MACA,GAAE,GAAI;AAAA,IACP;AAAA;AAAA,IAED,eAAe;AACd,YAAM,MAAMA,oBAAI;AAEhB,UAAI,UAAU;AAAA,QACb,SAAS;AAAA,QACT,SAAS,CAAC,QAAQ;AACjB,eAAK,gBAAgB,IAAI;AACzB,eAAK,cAAc;AAGnB,eAAK,iBAAgB;AAAA,QACrB;AAAA,QACD,MAAM,CAAC,QAAQ;AACdA,wBAAY,MAAA,MAAA,OAAA,kCAAA,SAAS,GAAG;AACxB,eAAK,cAAc;AACnBA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,MAAM;AAAA,UACP,CAAC;AAAA,QACF;AAAA,MACD,CAAC;AAAA,IACD;AAAA;AAAA,IAGD,mBAAmB;AAClB,YAAM,eAAeA,oBAAI;AACzB,mBAAa,MAAM;AACnB,mBAAa,KAAI;AAAA,IACjB;AAAA;AAAA,IAGD,uBAAuB;AAEtB,iBAAW,MAAM;AAChB,aAAK,cAAc;AAGnB,aAAK,WAAW,WAAW,MAAM;AAChC,eAAK,gBAAe;AAAA,QACpB,GAAE,GAAI;AAAA,MACP,GAAE,GAAG;AAAA,IACN;AAAA;AAAA,IAGD,kBAAkB;AACjB,WAAK,cAAc;AAGnB,iBAAW,MAAM;AAChB,aAAK,cAAc;AACnB,aAAK,cAAc;AAAA,MACnB,GAAE,GAAG;AAAA,IACN;AAAA;AAAA,IAGD,gBAAgB;AACf,UAAI,KAAK,UAAU;AAClB,qBAAa,KAAK,QAAQ;AAC1B,aAAK,WAAW;AAAA,MACjB;AAAA,IACA;AAAA;AAAA,IAGD,cAAc;AACb,WAAK,cAAa;AAClB,WAAK,gBAAe;AAAA,IACrB;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnLD,GAAG,WAAW,eAAe;"}